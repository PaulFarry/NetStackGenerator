// generated by a tool
import React, { Component } from 'react';
import { {{cs_name Name}}ApiClient } from './{{cml_case Name}}ApiClient';
import { {{cs_name SelectAllType.Name}} } from "./{{cs_name SelectAllType.Name}}";
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome'
import { faTrash } from '@fortawesome/free-solid-svg-icons'
import DateTimeDisplay from '../../controls/DateTimeDisplay';

interface I{{cs_name Name}}DeleteState {
    data: {{cs_name SelectAllType.Name}};
    error: boolean;
}

export class {{cs_name Name}}ConfirmDelete extends Component<any,I{{cs_name Name}}DeleteState> {

    private api: {{cs_name Name}}ApiClient = new {{cs_name Name}}ApiClient();

    constructor(props: any) {
        super(props);
        this.state = {
			data: this.props.location.state.data, // HACK
			error: false
		};

		this.cancelDelete = this.cancelDelete.bind(this);
        this.handleSubmit = this.handleSubmit.bind(this);
    }

	cancelDelete(event: any){
		this.props.history.goBack();
	}

    handleSubmit(event : any) {
		this.api.delete(this.state.data.id).then(data => {
			this.props.history.goBack();
        });
        event.preventDefault();
    }

    render() {
        return (
                <div>
                    <h1>Confirm Delete of {{hmn Name}}</h1>
					<div className="alert alert-danger" role="alert">
					  Are you sure you want to delete this {{hmn Name}}? Click the 'delete' button below to confirm deletion.
					</div>
                    <form onSubmit={this.handleSubmit} autoComplete="off">                        
						{{#each DisplayFields}}											

							<div className="form-group row">
								<label className="col-sm-2 col-form-label">{{hmn DisplayName}}</label>
								<div className="col-sm-10">							
								{{#if IsDateTime}}
									<DateTimeDisplay date={this.state.data.{{cml_case Name}} } />
								{{else}}
								<span>{ this.state.data.{{cml_case Name}} }</span>
								{{/if}}
								</div>
							</div>						
						{{/each}}
						<div className="row">
							<div className="col-sm-12">
								<button className="btn btn-danger mr-1" type="submit"><FontAwesomeIcon title="Delete" icon={faTrash} className="mr-1" />Delete</button>
								<button type="button" className="btn btn-outline-secondary" onClick={this.cancelDelete}>Cancel</button>
							</div>						
						</div>
                    </form>
                </div>
            );
    }
}